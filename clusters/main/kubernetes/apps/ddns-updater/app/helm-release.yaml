apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: ddns-updater
  namespace: ddns-updater
spec:
  interval: 15m
  chart:
    spec:
      chart: ddns-updater
      version: 12.11.0
      sourceRef:
        kind: HelmRepository
        name: truecharts
        namespace: flux-system
  values:
    TZ: Europe/Berlin
    resources: { }
    workload:
      main:
        podSpec:
          containers:
            main:
              env:
                CONFIG: |
                  {
                    "settings": [
                      {
                        "provider": "hetzner",
                        "zone_identifier": "p4SSdMcY5qT2Gx89cgXiyQ",
                        "domain": "craft.noitl.space",
                        "ttl": 120,
                        "token": "${DDNS_UPDATER_HETZNER_TOKEN}",
                        "ip_version": "ipv4",
                        "ipv6_suffix": ""
                      },
                      {
                        "provider": "hetzner",
                        "zone_identifier": "p4SSdMcY5qT2Gx89cgXiyQ",
                        "domain": "craft-map.noitl.space",
                        "ttl": 120,
                        "token": "${DDNS_UPDATER_HETZNER_TOKEN}",
                        "ip_version": "ipv4",
                        "ipv6_suffix": ""
                      },
                      {
                        "provider": "hetzner",
                        "zone_identifier": "p4SSdMcY5qT2Gx89cgXiyQ",
                        "domain": "audiobooks.noitl.space",
                        "ttl": 120,
                        "token": "${DDNS_UPDATER_HETZNER_TOKEN}",
                        "ip_version": "ipv4",
                        "ipv6_suffix": ""
                      },
                      {
                        "provider": "hetzner",
                        "zone_identifier": "p4SSdMcY5qT2Gx89cgXiyQ",
                        "domain": "cloud.noitl.space",
                        "ttl": 120,
                        "token": "${DDNS_UPDATER_HETZNER_TOKEN}",
                        "ip_version": "ipv4",
                        "ipv6_suffix": ""
                      },
                      {
                        "provider": "hetzner",
                        "zone_identifier": "p4SSdMcY5qT2Gx89cgXiyQ",
                        "domain": "kvb-kt.noitl.space",
                        "ttl": 120,
                        "token": "${DDNS_UPDATER_HETZNER_TOKEN}",
                        "ip_version": "ipv4",
                        "ipv6_suffix": ""
                      }
                    ]
                  }
